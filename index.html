<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BPM Sync Helper</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>BPM Sync Helper</h1>

        <div id="input-page" class="page active">
            <div class="input-group">
                <label for="ediusXmlFile">Učitaj Edius XML s referentnim markerima:</label>
                <input type="file" id="ediusXmlFile" accept=".xml">
                <button id="clearXmlButton" style="display:none;">Poništi učitani XML</button>
                <p id="xmlStatus" class="info-message" style="display:none;"></p>
            </div>

            <div class="input-group">
                <label for="fiksniBPM">Fiksni (izmjereni) BPM glazbe:</label>
                <input type="number" id="fiksniBPM" step="0.0001" placeholder="Npr. 120.0000" min="0.001" value="120.0000">
            </div>
            <div class="input-group">
                <label for="ciljaniBPM">Ciljani BPM videa:</label>
                <input type="number" id="ciljaniBPM" step="0.0001" placeholder="Npr. 128.0000" min="0.001" value="128.0000">
            </div>

            <div class="input-group">
                <label for="fpsSelect">FPS projekta:</label>
                <select id="fpsSelect">
                    <option value="23.976">23.976 (24p)</option>
                    <option value="24">24</option>
                    <option value="25" selected>25 (PAL)</option>
                    <option value="29.97">29.97 (NTSC)</option>
                    <option value="30">30</option>
                    <option value="47.952">47.952</option>
                    <option value="48">48</option>
                    <option value="50">50</option>
                    <option value="59.94">59.94</option>
                    <option value="60">60</option>
                </select>
                <span class="help-text" id="fpsHelpText"></span>
            </div>

            <div class="input-group">
                <label for="mjeraTakta">Mjera takta (koliko udaraca u taktu, npr. 4/4 = 4):</label>
                <input type="number" id="mjeraTakta" value="4" min="1">
            </div>

            <div class="timecode-section">
                <h3>Ručni unos Timecodeova (automatski se popunjava iz XML-a)</h3>
                <p class="info-message" id="manualInputMessage">Unesite timecodeove ili učitajte XML datoteku.</p>

                <div class="timecode-input" id="timecode-cijela">
                    <h4>Ukupno trajanje fizičke datoteke:</h4>
                    <input type="text" id="ukupnoTrajanjeDatotekeInput" placeholder="HH:MM:SS:FF" value="00:05:00:00" class="timecode-combined-input">
                </div>

                <div class="timecode-input" id="timecode-pocetak-segmenta">
                    <h4>Timecode početka glazbenog segmenta:</h4>
                    <input type="text" id="pocetakGlazbenogSegmentaInput" placeholder="HH:MM:SS:FF" value="00:00:00:00" class="timecode-combined-input">
                </div>

                <div class="timecode-input" id="timecode-kraj-segmenta">
                    <h4>Timecode kraja glazbenog segmenta:</h4>
                    <input type="text" id="krajGlazbenogSegmentaInput" placeholder="HH:MM:SS:FF" value="00:04:59:00" class="timecode-combined-input">
                </div>
            </div>

            <div class="input-group">
                <label for="pragDriftaFrameovi">Prag drifta (u frameovima) za generiranje markera:</label>
                <input type="number" id="pragDriftaFrameovi" value="1" min="0">
            </div>

            <p id="rezultat" class="info-message"></p> 

            <button id="calculateButton">Izračunaj Markere</button>
        </div>

        <div id="results-page" class="page">
            <h2>Rezultati proračuna</h2>
            <div id="markeriOutput" class="output-section">
            </div>
            <button id="downloadXmlButton" style="display:none;">Preuzmi XML</button>
            <div id="xmlOutput" class="output-section xml-output">
            </div>
        </div>
    </div>

    <script src="FileSaver.min.js"></script>
    <script src="script.js"></script>
</body>
</html>